{% extends "layouts/layout_dwp_pattern.html" %}

{% set page = {
  title: 'Banking details',
  description: 'User interface patterns for capturing the appropriate banking details from users'
} %}

{##############################################################################
START PATTERN BLOCK
##############################################################################}
{%- block pattern_block_1 -%}

{% set pattern = {
  title: 'Standard',
  criteria: [
    "the user needs to give details of the bank account they want to receive payment"
  ]
} %}

{# ---------------------------------------------------------------------------
  description of the pattern
------------------------------------------------------------------------------
  note:
  you can use markdown if you set markdown: true
  in the pattern obj. remember markdown is whitespace sensitive so remove
  tab or space indents if the output is different from expected
--------------------------------------------------------------------------- #}
{%- set pattern_description -%}

{%- endset -%}

{# ---------------------------------------------------------------------------
  content notes, you can use markdown if you set markdown: true
  in the pattern object
--------------------------------------------------------------------------- #}
{%- set pattern_notes_content -%}

{% endset %}

{# ---------------------------------------------------------------------------
  research notes, you can use markdown if you set markdown: true
  in the pattern object
--------------------------------------------------------------------------- #}
{%- set pattern_notes_research -%}

{% endset %}

{# ---------------------------------------------------------------------------
  the pattern demo block, use HTML to build a demo pattern or include screen
  shots.
--------------------------------------------------------------------------- #}
{%- set pattern_demo -%}

  <div class="column-two-thirds">
    <h1 class="heading-xlarge">Your bank details</h1>

    <form>
      <div class="form-group">
        <fieldset>
          <label class="form-label-bold label-no-hint" for="ba-account-holder">Account holder name</label>
          <input type="text" class="form-control" id="ba-account-holder" name="ba-account-holder" value="">
        </fieldset>
      </div>

      <legend class="form-label-bold">Sort code</legend>
      <div class="form-date form-group">
        <fieldset>
          <div class="form-group form-group-day">
            <label for="ba-sort1"></label>
            <input class="form-control" id="ba-sort1" maxlength="2" name="ba-sort1" value="" type="text">
          </div>

          <div class="form-group form-group-month">
            <label for="ba-sort2"></label>
            <input class="form-control" id="ba-sort2" maxlength="2" name="ba-sort2" value="" type="text">
          </div>

          <div class="form-group form-group-month">
            <label for="ba-sort3"></label>
            <input class="form-control" id="ba-sort3" maxlength="2" name="ba-sort3" value="" type="text">
          </div>
        </fieldset>
      </div>

      <div class="form-group">
        <fieldset>
          <label class="form-label-bold" for="ba-account-number">
            Account number
          </label>
          <input type="text" class="form-control" id="ba-account-number" name="ba-account-number" value="" maxlength="10">
        </fieldset>
      </div>

      <div class="form-group">
        <fieldset>
          <label class="form-label-bold" for="bs-society-roll">
            Building society roll or reference number (optional)
            <span class="form-hint">If your building society uses a roll or reference number, you will find it on your passbook</span>
          </label>
          <input type="text" class="form-control" id="bs-society-roll" name="bs-society-roll" value="" data-required="true">
        </fieldset>
      </div>
    </form>
  </div>

{%- endset -%}

{# ---------------------------------------------------------------------------
  css snippet block
--------------------------------------------------------------------------- #}
{%- set pattern_css -%}

{%- endset -%}

{# ---------------------------------------------------------------------------
  javascript snippet block, whatever you write in here will run in the
  page on window.load and be output as a snippet.
--------------------------------------------------------------------------- #}
{%- set pattern_javascript -%}

{%- endset -%}

{# this is where the above blocks and data is passed to the render pattern macro, ignore this unless your confortable with nunjucks and macros #}
{%- call docs.render_pattern({ metadata: pattern, demo: pattern_demo, demo_script: pattern_javascript, description: pattern_description, notes: { content: pattern_notes_content, research: pattern_notes_research }, snippets: [{ label: 'HTML', block : pattern_demo, hide: pattern.hideSnippetHTML | d(false) },{ label: 'CSS', block: pattern_css, languageClass: 'language-css', hide: pattern.hideSnippetCSS | d(false) },{ label: 'Javascript', block: pattern_javascript, languageClass: 'language-js', hide: pattern.hideSnippetJavascript | d(false) }] }) %}{% endcall %}

{%- endblock -%}
{#############################################################################
END PATTERN BLOCK
##############################################################################}


{##############################################################################
START PATTERN BLOCK
##############################################################################}
{%- block pattern_block_2 -%}

{% set pattern = {
  title: 'Progressive banking details',
  criteria: [
    "you want the user to think about which account they want the money paid into"
  ]
} %}

{# ---------------------------------------------------------------------------
  description of the pattern
------------------------------------------------------------------------------
  note:
  you can use markdown if you set markdown: true
  in the pattern obj. remember markdown is whitespace sensitive so remove
  tab or space indents if the output is different from expected
--------------------------------------------------------------------------- #}
{%- set pattern_description -%}

{%- endset -%}

{# ---------------------------------------------------------------------------
  content notes, you can use markdown if you set markdown: true
  in the pattern object
--------------------------------------------------------------------------- #}
{%- set pattern_notes_content -%}
Reading left to right and top to bottom most (not all) bank cards display information in this order:
+ card number
+ sort code
+ valid from
+ valid to
+ account holder
+ sort code
+ account number

Carer's found changing the order of input boxes to reflect this saved the user time on this page.
{% endset %}

{# ---------------------------------------------------------------------------
  research notes, you can use markdown if you set markdown: true
  in the pattern object
--------------------------------------------------------------------------- #}
{%- set pattern_notes_research -%}
User research for [Get your State Pension](http://dwp-digital-services.herokuapp.com/projects/0/get_your_state_pension) found that asking people whether they want to be paid into a bank account or a building society account makes them think about whether they need their pension for everyday spending or for savings.
{% endset %}

{# ---------------------------------------------------------------------------
  the pattern demo block, use HTML to build a demo pattern or include screen
  shots.
--------------------------------------------------------------------------- #}
{%- set pattern_demo -%}

<div class="column-two-thirds">
  <h1 class="heading-xlarge">Your payment details</h1>

  <p>How would you like to get paid?</p>

  <form>
    <fieldset>
      <div class="form-group">
        <!-- No data-targets to avoid duplication, see jQuery at bottom of this page -->
        <label class="block-label" for="bank-account-yes">
          <input id="bank-account-yes" type="radio" name="account-select" value="bank">
          Bank account
        </label>

        <label class="block-label" for="building-society-yes">
          <input id="building-society-yes" type="radio" name="account-select" value="building">
          Building society account
        </label>
      </div>
    </fieldset>

    <div class="js-hidden" id="bank-details">
      <div class="form-group">
        <fieldset>
          <label class="form-label-bold" for="account-name">
            Account holder name
          </label>
          <input type="text" class="form-control" id="account-name" name="account-name">
        </fieldset>
      </div>

      <legend class="form-label-bold">Sort code</legend>

      <div class="form-date form-group">
        <fieldset>
          <div class="form-group form-group-day">
            <label for="sort-code-1"></label>
            <input class="form-control" id="sort-code-1" maxlength="2" name="sort-code-1" type="text" />
          </div>

          <div class="form-group form-group-month">
            <label for="sort-code-2"></label>
            <input class="form-control" id="sort-code-2" maxlength="2"  name="sort-code-2" type="text" />
          </div>

          <div class="form-group form-group-month">
            <label for="sort-code-3"></label>
            <input class="form-control" id="sort-code-3" maxlength="2"  name="sort-code-3" type="text" />
          </div>
        </fieldset>
      </div>

      <div class="form-group">
        <fieldset>
          <label class="form-label-bold" for="account-number">
            Account number
          </label>
          <input type="text" class="form-control" id="account-number" name="account-number">
        </fieldset>
      </div>

    </div>

    <div class="js-hidden" id="building-society-details">
      <div class="form-group">
        <fieldset>
          <label class="form-label-bold" for="bs-society-roll">
            Building society roll or reference number
            <span class="form-hint">If your building society uses a roll or reference number, you will find it on your passbook</span>
          </label>

          <input type="text" class="form-control" id="bs-society-roll" name="bs-society-roll">
        </fieldset>
      </div>
    </div>

    <input type="submit" class="button" value="Continue">
  </form>
</div>


{%- endset -%}

{# ---------------------------------------------------------------------------
  css snippet block
--------------------------------------------------------------------------- #}
{%- set pattern_css -%}

{%- endset -%}

{# ---------------------------------------------------------------------------
  javascript snippet block, whatever you write in here will run in the
  page on window.load and be output as a snippet.
--------------------------------------------------------------------------- #}
{%- set pattern_javascript -%}
$(document).on('click', 'input[type="radio"]', function (e) {
  if ($(e.target).attr('id') === 'bank-account-yes' || $(e.target).attr('id') === 'building-society-yes') {
    $('#bank-details').removeClass('js-hidden');
    if ($(this).attr('id') === 'building-society-yes') {
      $('#building-society-details').removeClass('js-hidden');
    } else {
      $('#building-society-details').addClass('js-hidden');
    }
  }
});
{%- endset -%}

{# this is where the above blocks and data is passed to the render pattern macro, ignore this unless your confortable with nunjucks and macros #}
{%- call docs.render_pattern({ metadata: pattern, demo: pattern_demo, demo_script: pattern_javascript, description: pattern_description, notes: { content: pattern_notes_content, research: pattern_notes_research }, snippets: [{ label: 'HTML', block : pattern_demo, hide: pattern.hideSnippetHTML | d(false) },{ label: 'CSS', block: pattern_css, languageClass: 'language-css', hide: pattern.hideSnippetCSS | d(false) },{ label: 'Javascript', block: pattern_javascript, languageClass: 'language-js', hide: pattern.hideSnippetJavascript | d(false) }] }) %}{% endcall %}

{%- endblock -%}
{#############################################################################
END PATTERN BLOCK 2
##############################################################################}


{##############################################################################
START PATTERN BLOCK 3
##############################################################################}
{%- block pattern_block_3 -%}

{% set pattern = {
  title: 'Progressive banking details',
  criteria: [
    "you need to know whether the user has a bank account to receive payment"
  ]
} %}

{# ---------------------------------------------------------------------------
  description of the pattern
------------------------------------------------------------------------------
  note:
  you can use markdown if you set markdown: true
  in the pattern obj. remember markdown is whitespace sensitive so remove
  tab or space indents if the output is different from expected
--------------------------------------------------------------------------- #}
{%- set pattern_description -%}

{%- endset -%}

{# ---------------------------------------------------------------------------
  content notes, you can use markdown if you set markdown: true
  in the pattern object
--------------------------------------------------------------------------- #}
{%- set pattern_notes_content -%}
On Carer's this was original titled 'Payment'. This implied to users that they were being asked to pay from their account, not have money paid into it.

Post Office Card account information  was only included in Carer's because the service has an unusually high number of users with this type of account. This type of account is actually opened for users by the service if they don't have a bank account by the time the first payment is due.
{% endset %}

{# ---------------------------------------------------------------------------
  research notes, you can use markdown if you set markdown: true
  in the pattern object
--------------------------------------------------------------------------- #}
{%- set pattern_notes_research -%}
User research for [Carer’s Allowance](http://dwp-digital-services.herokuapp.com/projects/8/carers_allowance_digital_service) found that a significant number of users didn't have bank accounts at the time they applied or were reluctant to give their bank details online before they were actually awarded the benefit.
{% endset %}

{# ---------------------------------------------------------------------------
  the pattern demo block, use HTML to build a demo pattern or include screen
  shots.
--------------------------------------------------------------------------- #}
{%- set pattern_demo -%}

<div class="column-two-thirds">
  <h1 class="heading-xlarge">Your bank details</h1>
  <p>Carer&rsquo;s Allowance can be paid into a UK bank account, either your own or someone else&rsquo;s, or your own Post Office card account.
    You&rsquo;re responsible for repaying any overpayments, even if the money is paid into someone else&rsquo;s account

  <form>
    <legend>Do you have a bank account?</legend>
    <fieldset class="inline">
      <div class="form-group">
        <!-- No data-targets to avoid duplication, see jQuery at bottom of this page -->
        <label class="block-label" for="bank-account-yes2">
          <input id="bank-account-yes2" type="radio" name="account-select" value="Yes">
          Yes
        </label>

        <label class="block-label" for="bank-account-no2">
          <input id="bank-account-no2" type="radio" name="account-select" value="No">
          No
        </label>
      </div>
    </fieldset>

    <div class="js-hidden" id="bank-details2">
      <div class="form-group">
        <fieldset>
          <label class="form-label-bold label-no-hint" for="ba-account-holder">Account holder name</label>
          <input type="text" class="form-control" id="ba-account-holder" name="ba-account-holder" value="">
        </fieldset>
      </div>

      <legend class="form-label-bold">Sort code</legend>
      <div class="form-date form-group">
        <fieldset>
          <div class="form-group form-group-day">
            <label for="ba-sort1"></label>
            <input class="form-control" id="ba-sort1" maxlength="2" name="ba-sort1" value="" type="text">
          </div>

          <div class="form-group form-group-month">
            <label for="ba-sort2"></label>
            <input class="form-control" id="ba-sort2" maxlength="2" name="ba-sort2" value="" type="text">
          </div>

          <div class="form-group form-group-month">
            <label for="ba-sort3"></label>
            <input class="form-control" id="ba-sort3" maxlength="2" name="ba-sort3" value="" type="text">
          </div>
        </fieldset>
      </div>

      <div class="form-group">
        <fieldset>
          <label class="form-label-bold" for="ba-account-number">
            Account number
          </label>
          <input type="text" class="form-control" id="ba-account-number" name="ba-account-number" value="" maxlength="10">
        </fieldset>
      </div>

      <div class="form-group">
        <fieldset>
          <label class="form-label-bold" for="bs-society-roll">
            Building society roll or reference number (optional)
            <span class="form-hint">If your building society uses a roll or reference number, you will find it on your passbook</span>
          </label>
          <input type="text" class="form-control" id="bs-society-roll" name="bs-society-roll" value="" data-required="true">
        </fieldset>
      </div>
    </div>

    <div class="js-hidden" id="warningmessage">
      <div class="panel">
       <p>You won't be paid Carer's Allowance without a bank account.<br>
        You can add bank details after you apply by contacting the Carer's Allowance Unit.</p>
      </div>
    </div>
  </form>
</div>

{%- endset -%}

{# ---------------------------------------------------------------------------
  css snippet block
--------------------------------------------------------------------------- #}
{%- set pattern_css -%}

{%- endset -%}

{# ---------------------------------------------------------------------------
  javascript snippet block, whatever you write in here will run in the
  page on window.load and be output as a snippet.
--------------------------------------------------------------------------- #}
{%- set pattern_javascript -%}
$(document).on('click', 'input[type="radio"]', function (e) {
  if ($(e.target).attr('id') === 'bank-account-yes2' || $(e.target).attr('id') === 'bank-account-no2') {
    if ($(this).attr('id') === 'bank-account-no2') {
      $('#bank-details2').addClass('js-hidden');
      $('#warningmessage').removeClass('js-hidden');
    } else {
      $('#bank-details2').removeClass('js-hidden');
      $('#warningmessage').addClass('js-hidden');
    }
  }
});
{%- endset -%}

{# this is where the above blocks and data is passed to the render pattern macro, ignore this unless your confortable with nunjucks and macros #}
{%- call docs.render_pattern({ metadata: pattern, demo: pattern_demo, demo_script: pattern_javascript, description: pattern_description, notes: { content: pattern_notes_content, research: pattern_notes_research }, snippets: [{ label: 'HTML', block : pattern_demo, hide: pattern.hideSnippetHTML | d(false) },{ label: 'CSS', block: pattern_css, languageClass: 'language-css', hide: pattern.hideSnippetCSS | d(false) },{ label: 'Javascript', block: pattern_javascript, languageClass: 'language-js', hide: pattern.hideSnippetJavascript | d(false) }] }) %}{% endcall %}

{%- endblock -%}
{#############################################################################
END PATTERN BLOCK 3
##############################################################################}
