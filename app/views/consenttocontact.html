{% extends "layouts/layout_dwp_pattern.html" %}

{% set page = {
  title: 'Consent to contact',
  description: 'Pattern for getting users consent to contact third parties'
} %}

{##############################################################################
START PATTERN BLOCK
##############################################################################}
{%- block pattern_block_1 -%}

{% set pattern = {
  title: 'Standard',
  criteria: [
    "the service needs to contact third parties",
    "the user must name those third parties",
    "the user must give their consent to the department",
    "the user has to be aware they can withdraw their consent"
  ]
} %}

{# ---------------------------------------------------------------------------
  description of the pattern
------------------------------------------------------------------------------
  note:
  you can use markdown if you set markdown: true
  in the pattern obj. remember markdown is whitespace sensitive so remove
  tab or space indents if the output is different from expected
--------------------------------------------------------------------------- #}
{%- set pattern_description -%}
{%- endset -%}

{# ---------------------------------------------------------------------------
  content notes, you can use markdown if you set markdown: true
  in the pattern object
--------------------------------------------------------------------------- #}
{%- set pattern_notes_content -%}
This pattern was agreed with 2 members of the legal team as part of Employment Support Allowance and Industrial Injuries Disablement Benefit.

There must be content on the start page of the service explaining that the user will be asked for consent and has the right to withdraw it at any time following their application.

The user should be played back the people they've consented to contact and make a positive action that they agree those people can be contacted.

The pattern must **not** be used if legislation dictates that the service is unusable without necessary contact with a third party.

Allowing the user to give consent to contact confers the ability to withdraw consent. If this would render the service useless then you shouldn't use this pattern. Consent is assumed.
{% endset %}

{# ---------------------------------------------------------------------------
  research notes, you can use markdown if you set markdown: true
  in the pattern object
--------------------------------------------------------------------------- #}
{%- set pattern_notes_research -%}
{% endset %}

{# ---------------------------------------------------------------------------
  the pattern demo block, use HTML to build a demo pattern or include screen
  shots.
--------------------------------------------------------------------------- #}
{%- set pattern_demo -%}

<h1 class="heading-xlarge">People who might be contacted</h1>
<p class="lede">The following person might be asked for medical information about you:</p>

<ul class="hcp-list seperator">
      
  <li>Dr X XXXXX </li> 
  <li>GP </li> 
  <li>X Clinic, X road, Leeds LS1 1XX </li> 
  <li>07777 XXXXXX </li>
      
</ul>

<div>
  <fieldset id="consent">
    <legend for="consent">
      <span class="frequency-question"></span>
    </legend>
    <div class="form-group">
      <label class="block-label" for="consent-ThatsOK">
        <input id="consent-ThatsOK" type="radio" name="consent" value="Thats-OK">That&#39;s OK
      </label>

      <label class="block-label" for="consent-ThatsnotOK" data-target="notContactDetails" >
        <input id="consent-ThatsnotOK" type="radio" name="consent" value="Thats-not-OK">That&#39;s not OK
      </label>
    </div>
  </fieldset>
</div> 

<div class="form-group panel panel-border-narrow js-hidden alert-warning" id="notContactDetails">
  <p>If we can&#39;t contact your GP you might have to wait longer to get the full amount of Employment and Support Allowance. This is because it will take longer to to get details of your illness or condition that your GP could tell us about.</p>
</div>

<div class="form-group">
  <input type="submit" class="button" value="Continue">
</div>

{%- endset -%}

{# ---------------------------------------------------------------------------
  css snippet block
--------------------------------------------------------------------------- #}
{%- set pattern_css -%}

{%- endset -%}

{# ---------------------------------------------------------------------------
  javascript snippet block, whatever you write in here will run in the
  page on window.load and be output as a snippet.
--------------------------------------------------------------------------- #}
{%- set pattern_javascript -%}

{%- endset -%}

{# this is where the above blocks and data is passed to the render pattern macro, ignore this unless your confortable with nunjucks and macros #}
{%- call docs.render_pattern({ metadata: pattern, demo: pattern_demo, demo_script: pattern_javascript, description: pattern_description, notes: { content: pattern_notes_content, research: pattern_notes_research }, snippets: [{ label: 'HTML', block : pattern_demo, hide: pattern.hideSnippetHTML | d(false) },{ label: 'CSS', block: pattern_css, languageClass: 'language-css', hide: pattern.hideSnippetCSS | d(false) },{ label: 'Javascript', block: pattern_javascript, languageClass: 'language-js', hide: pattern.hideSnippetJavascript | d(false) }] }) %}{% endcall %}

{%- endblock -%}
{#############################################################################
END PATTERN BLOCK
##############################################################################}
